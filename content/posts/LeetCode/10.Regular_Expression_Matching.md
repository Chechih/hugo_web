---
title: "10. Regular Expression Matching"
date: 2023-08-15T01:48:33+08:00
categories: ["LeetCode_è§£é¡Œ"]
---
### å•é¡Œ
Given an input string **s** and a pattern **p**, implement regular expression matching with support for **'.'** and **'*'** where:

**'.'** Matches any single character.â€‹â€‹â€‹â€‹
**'*'** Matches zero or more of the preceding element.
The matching should cover the **entire** input string (not partial).
 ### ç¿»è­¯
çµ¦å®šè¼¸å…¥å­—ç¬¦ä¸² **s** å’Œæ¨¡å¼å­—ç¬¦ä¸² **p**ï¼Œè«‹å¯¦ç¾æ”¯æŒ **'.'** å’Œ **'*'** çš„æ­£å‰‡è¡¨é”å¼åŒ¹é…ï¼Œå…¶ä¸­ï¼š

**'.'** å¯ä»¥åŒ¹é…ä»»æ„å–®å€‹å­—ç¬¦ã€‚
**'*'** å¯ä»¥åŒ¹é…é›¶å€‹æˆ–å¤šå€‹å‰é¢çš„å…ƒç´ ã€‚
åŒ¹é…æ‡‰è©²è¦†è“‹**æ•´å€‹**è¼¸å…¥å­—ç¬¦ä¸²ï¼ˆä¸èƒ½æ˜¯éƒ¨åˆ†åŒ¹é…ï¼‰ã€‚
##### Example 1:
    Input: s = "aa", p = "a"
    Output: false
    Explanation: "a" does not match the entire string "aa".
##### Example 2:
    Input: s = "aa", p = "a*"
    Output: true
    Explanation: '*' means zero or more of the preceding element, 'a'. Therefore, by repeating 'a' once, it becomes "aa".
##### Example 3:
    Input: s = "ab", p = ".*"
    Output: true
    Explanation: ".*" means "zero or more (*) of any character (.)".
##### Constraints:
- 1 <= s.length <= 20
- 1 <= p.length <= 20
- **s** contains only lowercase English letters.
- **p** contains only lowercase English letters, **'.'**, and **'*'**.
- It is guaranteed for each appearance of the character **'*'**, there will be a previous valid character to match.

### æƒ³æ³• 1
é€™å•é¡Œä¸€é–‹å§‹æƒ³åˆ°çš„ï¼Œæ˜¯ç›´æ¥ç”¨ä½¿ç”¨ **'éè¿´'** çš„æ–¹å¼ä¸‹å»è§£ï¼Œå› ç‚ºé¡Œç›®æœ‰ **'.'** ä»£è¡¨ä»»ä½•æ•¸å­—ï¼Œè€Œ **'*'** å‰‡æ˜¯ä¸Šä¸€å€‹æ•¸å­—ï¼Œ **é‡è¤‡ N æ¬¡(N å¯èƒ½æ˜¯ 0)** ã€‚  
æ¯”å¦‚ s = 'a', å’Œ p = 'ab*' æ˜¯ç›¸ç­‰çš„ï¼Œå› ç‚º * å¯ä»¥è®“ b ä¸å‡ºç¾ï¼Œæ‰€ä»¥è®Šæˆ s = 'a'ï¼Œå’Œ p = 'a'ï¼Œä¸” s = 'abb', å’Œ p = 'ab*' ï¼Œä¹Ÿæ˜¯ç›¸ç­‰çš„ï¼Œå› ç‚º * å¯ä»¥è®“ä»–å‡ºç¾å…©æ¬¡ï¼Œè®Šæˆ s = 'abb'ï¼Œå’Œ p = 'abb'ã€‚  
è€Œ '.' æ›´ç‰¹æ®Šäº†ï¼Œä»–å¯ä»¥è®Šæˆä»»ä½•å­—å…ƒï¼Œæœ‰é»é¡ä¼¼æ’²å…‹ç‰Œä¸­çš„ Joker(é¬¼ç‰Œ)ï¼Œæ‰€ä»¥ä½ æœ‰ä¸€ä¸² s = 'abcdefg'ï¼Œ p = '.*'ï¼Œä»–å€‘æ˜¯ç›¸ç­‰çš„!?  
é‚£ **'éè¿´'** æ•´ç†å‡ºä¾†çš„é‚è¼¯å¦‚ä¸‹
- å…ˆæª¢æŸ¥åˆ°æœ€å¾Œ s å’Œ p æ˜¯ä¸æ˜¯ç©ºå­—ä¸²(å­—ä¸²è¢«æ¶ˆè€—å®Œç•¢çš„ç‹€æ³)ï¼Œé‚£ä»–ä¸€å®šæ˜¯ç›¸ç­‰çš„!?å›å‚³ True
- å†ä¾†æ¯”å° s çš„ç¬¬äºŒå€‹å­—å­—æºæ˜¯ä¸æ˜¯ '*'ï¼Œå¦‚æœæ˜¯å¯èƒ½å‡ºç¾å…©ç¨®ç‹€æ³
  - s çš„ç¬¬ä¸€å€‹å­—å…ƒå’Œ p çš„ç¬¬ä¸€å€‹å­—å…ƒç›¸ç­‰æ™‚ï¼Œæˆ–æ˜¯ p çš„ç¬¬ä¸€å€‹å­—å…ƒæ˜¯'.'(ä»»æ„å­—å…ƒ)ï¼Œä»–å¯èƒ½æ¶ˆè€—åˆ° s ç¬¬ä¸€å€‹å­—å…ƒï¼Œæˆ–æ˜¯æŠŠ p å‰é¢å…©å€‹å­—å…ƒ(N å’Œ *)[N æ˜¯ç¬¬ä¸€å€‹å­—å…ƒ]æ¶ˆè€—æ‰ï¼Œç¹¼çºŒ'éè¿´'
  - å¦‚æœä¸ç›¸ç­‰ï¼Œé‚£åªèƒ½æŠŠ p å‰é¢å…©å€‹æ‹¿æ‰(* = 0)ï¼Œç¹¼çºŒ'éè¿´'
- å†ä¾†æ˜¯åˆ¤æ–·ä¸æ˜¯ '*'æ™‚ï¼Œå°±åªèƒ½æ¯”å° s çš„ç¬¬ä¸€å€‹å­—å…ƒï¼Œå’Œ p çš„ç¬¬ä¸€å€‹å­—å…ƒæ˜¯ä¸æ˜¯ç›¸ç­‰ï¼Œæˆ–æ˜¯ p æ˜¯ä¸æ˜¯ '.'ï¼Œä¾†æŠŠå­—å…ƒæ¶ˆè€—æ‰
- æœ€å¾Œéƒ½ä¸æ˜¯ä¸Šé¢çš„ç‹€æ³ï¼Œä»£è¡¨ä»–å€‘ä¸åŒ¹é…ï¼Œç›´æ¥å›å‚³ False
### è§£æ³• 1
```python
class Solution:
class Solution:
    def run_isMatch(self, s: str, p: str) -> bool:
        s_leg = len(s)
        p_leg = len(p)
        if s == '' and p == '':
            return True
        if p_leg > 1 and p[1] == '*':
            if s_leg > 0 and (s[0] == p [0] or p [0] =='.'):
                return self.run_isMatch(s[1::], p) or self.run_isMatch(s, p[2::])
                #å¦‚æœ p ç¬¬äºŒå€‹å­—æ˜¯ *, å‰‡å¯èƒ½æ˜¯ s ç¬¬ä¸€å€‹å­—, æˆ–æ˜¯å®Œå…¨æ²’åŒ¹é…ç›´æ¥æ‹¿æ‰å…©ç¨®å¯èƒ½
            else:
                #å¦‚æœåœ°ä¸€å€‹å­—å®Œå…¨ä¸åŒ, é‚£ä¸€å®šè¦æ‹¿æ‰ p
                return self.run_isMatch(s, p[2::])
        if s_leg > 0 and p_leg > 0 and (s[0] == p [0] or p [0] =='.'):
            return self.run_isMatch(s[1::], p[1::])
        return False
    
    def isMatch(self, s: str, p: str) -> bool:
        p_ary = []# ç”¨ä¾†æŠŠé‡è¤‡çš„æ­£è¦æ¸…æ‰æ¯”å¦‚ a*a*a*a* -> a*
        for pc in p:
            if pc != '*':
                p_ary.append(pc)
            else:
                last = p_ary.pop()
                if len(p_ary) == 0 or (p_ary[-1] != last + '*'):
                    p_ary.append(last + '*')
        return self.run_isMatch(s, ''.join(p_ary))
```

### æƒ³æ³• 2
å†ä¾†é€™é¡Œä¹Ÿå¯ä»¥ä½¿ç”¨ DP (å‹•æ…‹è¦åŠƒ)ï¼Œä¸‹å»è§£ï¼Œåªæ˜¯è¦æ‰¾åˆ°è¦å¾‹ï¼Œè¦å…ˆå®šç¾©ä¸€å€‹äºŒå¾®é™£åˆ—ï¼ŒX åˆ—æ˜¯ s å­—ä¸²çš„é•·åº¦ï¼ŒY åˆ—æ˜¯ p å­—ä¸²çš„é•·åº¦ï¼Œæ‰€ä»¥ dp[i][j] æ˜¯ s[0:j:] å’Œ p[0:i:]ï¼Œåˆæœ‰ä¸‹ä¸‰ç¨®ç‹€æ³:  
-  if p[i - 1] != '*' æ™‚ï¼Œdp[i][j] = dp[i - 1][j - 1] and (p[i - 1] == s[j - 1] || p[i - 1] == '.');
-  if p[i - 1] == '*' æ™‚ï¼Œç¬¬ä¸€ç¨®ç‹€æ³æ˜¯ dp[i][j] = dp[i - 2][j]ï¼Œ * é‡è¤‡ 0 æ¬¡æ™‚
-  if p[i - 1] == '*' æ™‚ï¼Œç¬¬äºŒç¨®ç‹€æ³æ˜¯ dp[i][j] = dp[i][j - 1] and (s[j - 1] == p[i - 2] or p[i - 2] == '.')ï¼Œ * é‡è¤‡ 1 æ¬¡ä»¥ä¸Šæ™‚
è¤‡ä¸Šåœ–ç‰‡æ¯”è¼ƒèƒ½ç†è§£!?  
åœ–ç‰‡ç¯„ä¾‹æ˜¯ p = "mississippi", s = "mis*is*ip*."
![10. Regular Expression Matching Sample](/images/LeetCode/10.Regular_Expression_Matching_Sample.png "10. Regular Expression Matching Sample")  
åœ–ç‰‡ä¾†æº: [ğŸš€ âœ… Detailed explaination ğŸ”¥ with Pictures âœ… ğŸ”¥ ğŸš€ in C++,Java , Python , DP bottom up tabulation.](https://leetcode.com/problems/regular-expression-matching/solutions/3401751/detailed-explaination-with-pictures-in-c-java-python-dp-bottom-up-tabulation/)  

### è§£æ³• 2
```python
class Solution:
    def isMatch(self, s: str, p: str) -> bool:
        s_leg = len(s)
        p_leg = len(p)
        dp = [[False for i in range(s_leg + 1)] for j in range(p_leg + 1)]
        # å»º dp ç”¨çš„é™£åˆ—
        dp[0][0] = True
        for j in range(s_leg + 1):
            for i in range(1, p_leg + 1):# p æ²’æœ‰å­—æ™‚ï¼Œä¸å¯èƒ½åŒ¹é…ï¼Œç›´æ¥ä¸è€ƒæ…®
                if i - 1 >= 0 and p[i - 1] != '*':
                    dp[i][j] = dp[i - 1][j - 1] and (p[i - 1] == s[j - 1] or p[i - 1] == '.')
                    # æ²’æœ‰ * æ™‚ï¼Œåªèƒ½ä¸‹å»æ¯”å°å­—ä¸²æ˜¯ä¸æ˜¯ç›¸ç­‰ï¼Œæˆ–æ˜¯ç­‰æ–¼ . äº†
                elif i - 2 >= 0:
                    dp[i][j] = dp[i - 2][j]
                    # * é‡è¤‡ 0 æ¬¡æ™‚
                    dp[i][j] = dp[i][j] or (dp[i][j - 1] and (s[j - 1] == p[i - 2] or p[i - 2] == '.'))
                    # * é‡è¤‡ 1 æ¬¡ä»¥ä¸Šæ™‚

        return dp[p_leg][s_leg]
```
### æƒ³æ³• 3
ç›´æ¥ä½œå¼Šç”¨æ­£è¦è¡¨é”å¼çš„å¥—ä»¶XDDDD
### è§£æ³• 3
```python
class Solution:
    def isMatch(self, s: str, p: str) -> bool:
        finded = re.findall(p, s)
        return len(finded) > 0 and finded[0] == s
```

åƒè€ƒ:  
[ğŸš€ âœ… Detailed explaination ğŸ”¥ with Pictures âœ… ğŸ”¥ ğŸš€ in C++,Java , Python , DP bottom up tabulation.](https://leetcode.com/problems/regular-expression-matching/solutions/3401751/detailed-explaination-with-pictures-in-c-java-python-dp-bottom-up-tabulation/)  
[C++ O(n)-space DP](https://leetcode.com/problems/regular-expression-matching/solutions/5684/c-on-space-dp/)  
[[LeetCode] 10. Regular Expression Matching æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…](https://www.cnblogs.com/grandyang/p/4461713.html)  